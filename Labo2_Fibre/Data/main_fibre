import matplotlib.pyplot as plt
import pandas as pd
import os

# ==========================================
# CONFIGURATION - À MODIFIER
# ==========================================
nom_fichier_csv = 'Results.csv'
nom_graphique_output = 'graphique_quelquonque' # Changez le nom ici sans l'extension
# ==========================================

# 1. Configuration des chemins
# Récupère le dossier où se trouve ce script
dossier_script = os.path.dirname(os.path.abspath(__file__))
chemin_lecture = os.path.join(dossier_script, nom_fichier_csv)

# 2. Chargement des données
try:
    df = pd.read_csv(chemin_lecture)
    print(f"Fichier '{nom_fichier_csv}' chargé avec succès.")
except FileNotFoundError:
    print(f"Erreur : Le fichier '{nom_fichier_csv}' est introuvable dans {dossier_script}")
    exit()

# Extraction des données par position (Colonnes 1 et 2)
x_data = df.iloc[:, 0]
y_data = df.iloc[:, 1]

# 3. Normalisation des données entre 0 et 1
y_normalise = (y_data - y_data.min()) / (y_data.max() - y_data.min())

# 4. Configuration du graphique
plt.rcParams.update({"font.family": "serif", "font.size": 11})
f, ax = plt.subplots(figsize=(8, 5))

# Tracer les données
ax.plot(x_data, y_normalise, color='black', linewidth=1)

# Étiquettes des axes (récupère les noms originaux du CSV)
ax.set_xlabel("Axe x [unité]]")
ax.set_ylabel("Axe y [unité]]")

# Ajustement des limites de l'axe Y
ax.set_ylim(0, 1.05)

plt.tight_layout()

# 5. Sauvegarde dans le même dossier que le script
# On utilise la variable nom_graphique_output pour générer les fichiers
chemin_png = os.path.join(dossier_script, f"{nom_graphique_output}.png")
chemin_pdf = os.path.join(dossier_script, f"{nom_graphique_output}.pdf")

f.savefig(chemin_png, bbox_inches='tight', dpi=600)
f.savefig(chemin_pdf, bbox_inches='tight')

print(f"Graphiques sauvegardés sous le nom : {nom_graphique_output}")
print(f"Emplacement : {dossier_script}")

# Affichage à l'écran
plt.show()